<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    


    <script>
        //콜백함수(Call back)
        // 함수를 호출하는 시점이 바뀌어진 형태의 함수
        // 기본방식 : 사용자(개발자)가 함수를 직접정의 -> 정의된 함수를 호출(call)하여 결과를 반환받는 방식
        // callback : 콜백함수에 인자로 로직이 담긴 함수(함수주소)를 전달하여 콜백함수로부터 처리된 결과를
        // 반환받는 방식


        // 일반함수
        // function func(n1,n2){
        //     console.log("func(n1,n2)...call");
        //     return n1+n2;
        // }

        // const v1 = func(10,20); //Call-by-value        // 값(value)전달을 통한 함수 직접 실행(call)
        // console.log("v1",v1);

        //call back함수
        // function callBackFunc(n1,n2,logic){
        //     console.log('callBackFunc.....start...');
        //     const v = logic(n1,n2);
        //     console.log("v",v);
        //     console.log('callBackFunc.....start...');
        // }

        // callBackFunc(100,200,func);


        //callback 함수로 map 만들기
        [100,200,300,400].map(()=>{})
        function customMap(array,func){
            let tmp = [];
            for(let i =0;i<array.length;i++){
                const item = array[i];
                const reNewItem = func(item);
                tmp.push(reNewItem);
            }
            return tmp;
         }
         arr = [
            {id:'1111',name:'박건우',age:30,addr:"대구"},
            {id:'2222',name:'설리반',age:330,addr:"대구"},
            {id:'3333',name:'송송',age:110,addr:"대구"},
            {id:'4444',name:'우디',age:56,addr:"대구"},
         ];

         const r_val1 = customMap(arr,(item)=>{return{id:item.id, name:item.name}});
         console.log("r_val1",r_val1);

         const r_val2
          = customMap(arr, (item)=>{return{name:item.name,addr:item.addr}});
         console.log("r_val2",r_val2);

         //callback + closure
         function callbackFunc3(array){
            let tmp = [];  // state
            
            //inner function
            function map(logic){
                for (let i =0;i<array.length;i++){
                const item = array[i];
                const reNewItem = logic(item);
                tmp.push(reNewItem);
            }
            return tmp;
            }
            return{
                map : map
            }
         }
         const r_val3 = callbackFunc3(arr).map((item)=>{return {'아이디':item.id, '나이':item.age}});
         console.log("r_val3",r_val3);

         // 정렬
         //Sort(선택정렬)
        function callback3(array, func) {
            let tmp = 0; //임시저장 
            for (i = 0; i < array.length - 1; i++) {
                for (j = i + 1; j < array.length; j++) {
                    if (func(array[j], array[i]) <= 0) {
                        tmp = array[i];
                        array[i] = array[j];
                        array[j] = tmp;
                    }
                }
            }
        }
        arr2 = [10, 2, 4, 5, 1, 3, 7, 6]

        callback3(arr2, (a, b) => { return b - a })
        console.log(arr2)


        function callback4(array) {
            let tmp = 0; //임시저장 

            function sort(func) {
                for (i = 0; i < array.length - 1; i++) {
                    for (j = i + 1; j < array.length; j++) {
                        if (func(array[j], array[i]) <= 0) {
                            tmp = array[i];
                            array[i] = array[j];
                            array[j] = tmp;
                        }
                    }
                }
            }
            return { sort: sort }
        }
        arr3 = [4, 2, 12, 5, 4, 7]
        callback4(arr3).sort((a, b) => a - b)
        console.log(arr3)


         // 필터만들기 (callback + closure)
    </script>
</body>
</html>